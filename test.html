<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QDESK ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –¥–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</title>
    <link rel="preconnect" href="https://unpkg.com">
    <style>body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}</style>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-white">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const BRAND = {
        name: "QDESK",
        accent: "#007AFF",
        tagline: "–õ–æ–∫–∞–ª—å–Ω–∞—è –¥–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è",
        sub: "–†–∞–∑–º–µ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω –∏ –ø–æ–ª—É—á–∏ –ª–∏—Å—Ç–æ–≤–∫—É —Å QR-–∫–æ–¥–æ–º –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω–∞."
      };

      // üîó —É–∫–∞–∂–∏ —Å–≤–æ–π —Ö–æ—Å—Ç n8n
      const N8N_WEBHOOK = "https://mayersbeget.online/webhook/qdesk-chat";

      const MOCK = [
        { id: 1, title: "iPhone 8, 64 –ì–ë", price: "5 000 ‚ÇΩ", area: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", city: "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" },
        { id: 2, title: "–í–µ–ª–æ—Å–∏–ø–µ–¥ Stels", price: "12 000 ‚ÇΩ", area: "–ö—É–∑–Ω–µ—Ü–∫–∏–π", city: "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" },
        { id: 3, title: "–†–µ–º–æ–Ω—Ç —Å—Ç–∏—Ä–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω", price: "–æ—Ç 1 500 ‚ÇΩ", area: "–û—Ä–¥–∂–æ–Ω–∏–∫–∏–¥–∑–µ–≤—Å–∫–∏–π", city: "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" },
        { id: 4, title: "MacBook Air 2015", price: "25 000 ‚ÇΩ", area: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", city: "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" },
        { id: 5, title: "–î–µ—Ç—Å–∫–∞—è –∫–æ–ª—è—Å–∫–∞", price: "3 500 ‚ÇΩ", area: "–ö—É–∑–Ω–µ—Ü–∫–∏–π", city: "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫" },
      ];

      /* ==== HERO CAROUSEL ==== */
      function HeroCarousel(){
        const slides = React.useMemo(() => ([
          { ...MOCK[0], img: "assets/iphone8-cover.jpg" },
          { ...MOCK[1], img: "assets/stels-cover.jpg" },
          { ...MOCK[2], img: "assets/washmachine-cover.jpg" },
          { ...MOCK[3], img: "assets/macbook-cover.jpg" },
          { ...MOCK[4], img: "assets/stroller-cover.jpg" },
        ]), []);
        const [i, setI] = React.useState(0);
        const n = slides.length;

        React.useEffect(()=>{
          const t = setInterval(()=> setI(prev => (prev+1)%n), 3500);
          return ()=> clearInterval(t);
        }, [n]);

        const go = (dir)=> setI(prev => (prev + dir + n) % n);

        return (
          <div className="rounded-2xl border border-neutral-200 bg-white shadow p-0 overflow-hidden">
            <div className="relative aspect-[16/10]">
              {slides.map((s,idx)=>(
                <div key={s.id} className={`absolute inset-0 transition-opacity duration-500 ${idx===i ? 'opacity-100' : 'opacity-0'}`}>
                  <img src={s.img} alt={s.title} className="w-full h-full object-cover" draggable="false" />
                  <div className="absolute bottom-3 left-3 right-3">
                    <div className="backdrop-blur bg-white/70 border border-white/50 rounded-xl px-3 py-2 flex items-center justify-between">
                      <div className="min-w-0">
                        <div className="text-sm font-semibold truncate">{s.title}</div>
                        <div className="text-xs text-neutral-600 truncate">{s.price} ‚Ä¢ {s.city}</div>
                      </div>
                      <a href={`#l-${s.id}`} className="shrink-0 px-3 py-1.5 rounded-lg text-xs font-semibold text-white" style={{backgroundColor: BRAND.accent}}>
                        –°–º–æ—Ç—Ä–µ—Ç—å
                      </a>
                    </div>
                  </div>
                </div>
              ))}

              <button onClick={()=>go(-1)} aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π" className="absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 hover:bg-white border border-neutral-200 w-9 h-9 grid place-items-center">‚Äπ</button>
              <button onClick={()=>go(1)} aria-label="–°–ª–µ–¥—É—é—â–∏–π" className="absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 hover:bg-white border border-neutral-200 w-9 h-9 grid place-items-center">‚Ä∫</button>

              <div className="absolute bottom-2 left-0 right-0 flex justify-center gap-2">
                {slides.map((_,k)=>(
                  <button key={k} onClick={()=>setI(k)} aria-label={`–°–ª–∞–π–¥ ${k+1}`} className={`h-2 rounded-full transition-all ${k===i?'w-6 bg-neutral-900':'w-2 bg-neutral-300'}`} />
                ))}
              </div>
            </div>
          </div>
        );
      }

      /* ==== CHAT STUB (–±–æ–ª—Ç–∞–ª–∫–∞ –≤ –∑–æ–Ω–µ –ø–æ–∏—Å–∫–∞) ==== */
      function ChatStub(){
        const [open, setOpen] = React.useState(true);
        const [input, setInput] = React.useState("");
        const [sending, setSending] = React.useState(false);
        const [messages, setMessages] = React.useState([
          { role: "assistant", text: "–ü—Ä–∏–≤–µ—Ç! –°–ø—Ä–æ—Å–∏, –∫–∞–∫ –≤ —á–∞—Ç–µ: ¬´–∞–π—Ñ–æ–Ω –¥–æ 20–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ¬ª ‚Äî —è –æ—Ç–ø—Ä–∞–≤–ª—é –∑–∞–ø—Ä–æ—Å." }
        ]);

        async function sendMessage(e){
          e?.preventDefault();
          const text = input.trim();
          if(!text || sending) return;
          setInput("");
          setMessages(m=>[...m, {role:"user", text}]);
          setSending(true);
          try{
            const r = await fetch(N8N_WEBHOOK + "?v=" + Date.now(), {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ message: text })
            });
            let reply = "–ì–æ—Ç–æ–≤–æ! –Ø –ø—Ä–∏–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å.";
            try {
              const data = await r.json();
              if (data && typeof data.reply === "string") reply = data.reply;
            } catch(_) {}
            setMessages(m=>[...m, {role:"assistant", text: reply}]);
          } catch(err){
            setMessages(m=>[...m, {role:"assistant", text: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–∏—Å–æ–º. –ü—Ä–æ–≤–µ—Ä—å –≤–µ–±—Ö—É–∫ –∏–ª–∏ CORS."}]);
          } finally {
            setSending(false);
          }
        }

        return (
          <div className="mt-6">
            <div className="rounded-2xl border border-neutral-200 bg-white shadow-sm overflow-hidden">
              <div className="px-4 py-3 flex items-center justify-between">
                <div className="font-semibold">–ü–æ–∏—Å–∫ –∫–∞–∫ –≤ —á–∞—Ç–µ (beta)</div>
                <button
                  onClick={()=>setOpen(o=>!o)}
                  className="text-sm px-3 py-1.5 rounded-lg border border-neutral-200 hover:bg-neutral-50"
                >
                  {open ? "–°–≤–µ—Ä–Ω—É—Ç—å" : "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"}
                </button>
              </div>

              {open && (
                <div className="px-4 pb-4">
                  <div className="h-52 overflow-auto rounded-xl border border-neutral-100 p-3 bg-neutral-50">
                    {messages.map((m,i)=>(
                      <div
                        key={i}
                        className={
                          "mb-2 max-w-[85%] rounded-xl px-3 py-2 text-sm " +
                          (m.role === "user"
                            ? "ml-auto bg-blue-600 text-white"
                            : "mr-auto bg-white border border-neutral-200")
                        }
                      >
                        {m.text}
                      </div>
                    ))}
                    {sending && (
                      <div className="mr-auto bg-white border border-neutral-200 rounded-xl px-3 py-2 text-sm inline-block">
                        –ü–µ—á–∞—Ç–∞—é‚Ä¶
                      </div>
                    )}
                  </div>

                  <form onSubmit={sendMessage} className="mt-3 flex items-center gap-2">
                    <input
                      value={input}
                      onChange={e=>setInput(e.target.value)}
                      placeholder='–ù–∞–ø—Ä–∏–º–µ—Ä: "–∞–π—Ñ–æ–Ω –¥–æ 20–∫ —Ü–µ–Ω—Ç—Ä"'
                      className="flex-1 outline-none rounded-xl border border-neutral-200 px-3 py-2 text-[15px] placeholder:text-neutral-400"
                    />
                    <button
                      type="submit"
                      disabled={sending}
                      className="px-4 py-2 rounded-xl font-semibold text-white disabled:opacity-60"
                      style={{backgroundColor: BRAND.accent}}
                    >
                      –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                    </button>
                  </form>

                  <div className="mt-2 text-xs text-neutral-500">
                    –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É—Ö–æ–¥–∏—Ç: –≤–∫–ª—é—á–∏—Ç–µ CORS –¥–ª—è –≤–µ–±—Ö—É–∫–∞ –≤ n8n –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω.
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      }

      /* ==== GRID BELOW SEARCH (–∫–∞–∫ —É —Ç–µ–±—è –±—ã–ª–æ) ==== */
      function SearchInside(){
        const covers = [
          { id:1, img:"assets/iphone8-cover.jpg", title:"iPhone 8, 64 –ì–ë" },
          { id:2, img:"assets/stels-cover.jpg", title:"–í–µ–ª–æ—Å–∏–ø–µ–¥ Stels" },
          { id:3, img:"assets/washmachine-cover.jpg", title:"–†–µ–º–æ–Ω—Ç —Å—Ç–∏—Ä–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω" },
          { id:4, img:"assets/macbook-cover.jpg", title:"MacBook Air 2015" },
          { id:5, img:"assets/stroller-cover.jpg", title:"–î–µ—Ç—Å–∫–∞—è –∫–æ–ª—è—Å–∫–∞" },
        ];

        return (
          <section className="max-w-6xl mx-auto px-4 py-12 bg-neutral-50">
            <h2 className="text-2xl font-bold mb-6">–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ QDESK</h2>

            {/* –±–æ–ª—Ç–∞–ª–∫–∞ –ø—Ä—è–º–æ –∑–¥–µ—Å—å */}
            <ChatStub />

            <div className="mt-8 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
              {covers.map(c=>(
                <div key={c.id} className="rounded-xl border border-neutral-200 overflow-hidden shadow">
                  <img src={c.img} alt={c.title} className="w-full h-32 object-cover" />
                  <div className="px-3 py-2 text-sm font-medium truncate">{c.title}</div>
                </div>
              ))}
            </div>
          </section>
        );
      }

      /* ==== SAFE SPOT (—Å —Ñ–æ—Ç–æ) ==== */
      function SafeSpot(){
        return (
          <section id="safe-spot" className="py-16 bg-neutral-950">
            <div className="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10 items-center">
              <div className="rounded-2xl border border-neutral-800 bg-neutral-900 shadow p-6 overflow-hidden">
                <img src="assets/safe-spot.jpg" alt="QDESK Safe Spot" className="w-full h-full object-cover rounded-lg" />
              </div>
              <div>
                <h2 className="text-3xl font-bold mb-3 text-white">QDESK Safe Spot</h2>
                <p className="text-neutral-400 mb-5">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Å—Ç—Ä–µ—á–∏ —Å –∫–∞–º–µ—Ä–æ–π –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –≤—ã–¥–∞—á–∏. –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—É—é –ª–æ–∫–∞—Ü–∏—é, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–¥–µ–ª–∫—É QR‚Äë–∫–æ–¥–æ–º ‚Äî –∏ –≤—Å—ë.</p>
                <ul className="space-y-3 text-neutral-300">
                  <li>‚Ä¢ –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è: –∫–∞—Ñ–µ, –∫–æ–≤–æ—Ä–∫–∏–Ω–≥–∏ –∏ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Ç–æ—á–∫–∏.</li>
                  <li>‚Ä¢ –ö–∞–º–µ—Ä–∞ –∏ –∂—É—Ä–Ω–∞–ª –≤–∏–∑–∏—Ç–æ–≤: –ø–æ–≤—ã—à–∞—é—Ç –¥–æ–≤–µ—Ä–∏–µ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω.</li>
                  <li>‚Ä¢ QR/–ü–∏–Ω‚Äë–∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: –≤—ã–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è.</li>
                </ul>
              </div>
            </div>
          </section>
        );
      }

      /* ==== HEADER + APP ==== */
      function Header(){
        return (
          <header className="max-w-6xl mx-auto px-4 py-6 flex justify-between items-center">
            <div className="text-lg font-bold">{BRAND.name}</div>
            <button className="bg-blue-500 text-white px-4 py-2 rounded-lg">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
          </header>
        );
      }

      function App(){
        return (
          <div>
            <Header />
            <main className="max-w-6xl mx-auto px-4">
              <h1 className="text-4xl font-bold mb-4">{BRAND.tagline}</h1>
              <p className="mb-6 text-lg text-neutral-700">{BRAND.sub}</p>

              <HeroCarousel />
              <SearchInside />
              <SafeSpot />
            </main>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
  </body>
</html>
