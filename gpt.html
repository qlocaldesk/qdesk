<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QDESK — локальная доска объявлений</title>
    <link rel="preconnect" href="https://unpkg.com">
    <style>body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}</style>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-white">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const BRAND = {
        name: "QDESK",
        accent: "#007AFF",
        tagline: "Локальная доска объявлений нового поколения",
        sub: "Размести объявление онлайн и получи листовку с QR-кодом для оффлайна."
      };

      const MOCK = [
        { id: 1, title: "iPhone 8, 64 ГБ", price: "5 000 ₽", area: "Центральный", city: "Новокузнецк" },
        { id: 2, title: "Велосипед Stels", price: "12 000 ₽", area: "Кузнецкий", city: "Новокузнецк" },
        { id: 3, title: "Ремонт стиральных машин", price: "от 1 500 ₽", area: "Орджоникидзевский", city: "Новокузнецк" },
        { id: 4, title: "MacBook Air 2015", price: "25 000 ₽", area: "Центральный", city: "Новокузнецк" },
        { id: 5, title: "Детская коляска", price: "3 500 ₽", area: "Кузнецкий", city: "Новокузнецк" },
      ];

      /* ==== ICONS (inline SVG, stroke 1.5) ==== */
      const ico = {
        Shield: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 3l7 3v5c0 5.25-3.5 9-7 10-3.5-1-7-4.75-7-10V6l7-3z"/><path d="M9 12l2 2 4-4"/></svg>),
        Handshake: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 12l3-3a2 2 0 1 1 3 3l-5.5 5.5a3 3 0 0 1-4.24 0L5 14"/><path d="M7 12l3-3 2 2M4 10l3-3M20 10l-3-3"/></svg>),
        CheckBadge: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M7.5 2.75l2 1 2.5-1 2.5 1 2-1 1 2.25 2 1.75-.75 2.5.75 2.5-2 1.75-1 2.25-2-1-2.5 1-2.5-1-2 1-1-2.25-2-1.75L3.75 9l.75-2.5-2-1.75 1-2.25 2 1z"/><path d="M8 12l2 2 5-5"/></svg>),
        Pin: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 21s7-6.2 7-11a7 7 0 1 0-14 0c0 4.8 7 11 7 11z"/><circle cx="12" cy="10" r="2.5"/></svg>),
        Camera: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4 8h3l2-3h6l2 3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"/><circle cx="12" cy="13" r="3.5"/></svg>),
        Lock: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="4" y="11" width="16" height="9" rx="2"/><path d="M8 11V8a4 4 0 1 1 8 0v3"/></svg>),
        Card: (props)=>(<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="2.5" y="5.5" width="19" height="13" rx="2.5"/><path d="M2.5 10.5h19M7 15.5h4"/></svg>),
      };
      const { Shield, Handshake, CheckBadge, Pin, Camera, Lock, Card } = ico;

      /* ==== HERO CAROUSEL ==== */
      function makeThumb({title, accent}) {
        const bg1 = encodeURIComponent(accent || BRAND.accent);
        const bg2 = encodeURIComponent("#0ea5e9");
        const safeText = encodeURIComponent(title.length > 18 ? title.slice(0,18) + "…" : title);
        const svg = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 480'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='${bg1}'/><stop offset='1' stop-color='${bg2}'/></linearGradient></defs><rect width='100%' height='100%' fill='url(#g)'/><g fill='white' opacity='0.2'><circle cx='520' cy='90' r='80'/><circle cx='80' cy='400' r='60'/></g><rect x='24' y='24' width='160' height='36' rx='10' fill='rgba(255,255,255,0.85)'/><text x='40' y='49' font-size='20' font-family='Inter, Arial' fill='#0f172a'>QDESK • рядом</text><rect x='24' y='380' width='260' height='64' rx='14' fill='rgba(255,255,255,0.9)'/><text x='40' y='420' font-size='26' font-weight='700' font-family='Inter, Arial' fill='#0f172a'>${safeText}</text></svg>`;
        return `data:image/svg+xml;utf8,${svg}`;
      }

      function HeroCarousel(){
        const slides = React.useMemo(()=>([
          { ...MOCK[0], img: "assets/iphone8-cover.jpg" }, // реальное фото для первого объявления
          ...MOCK.slice(1).map(item=>({ ...item, img: makeThumb({ title: item.title, accent: BRAND.accent }) }))
        ]), []);
        const [i, setI] = React.useState(0);
        const n = slides.length;

        React.useEffect(()=>{
          const t = setInterval(()=> setI(prev => (prev+1)%n), 3500);
          return ()=> clearInterval(t);
        }, [n]);

        const go = (dir)=> setI(prev => (prev + dir + n) % n);

        return (
          <div className="rounded-2xl border border-neutral-200 bg-white shadow p-0 overflow-hidden">
            <div className="relative aspect-[16/10]">
              {slides.map((s,idx)=>(
                <div key={s.id} className={`absolute inset-0 transition-opacity duration-500 ${idx===i ? 'opacity-100' : 'opacity-0'}`}>
                  <img src={s.img} alt={s.title} className="w-full h-full object-cover" draggable="false" />
                  <div className="absolute bottom-3 left-3 right-3">
                    <div className="backdrop-blur bg-white/70 border border-white/50 rounded-xl px-3 py-2 flex items-center justify-between">
                      <div className="min-w-0">
                        <div className="text-sm font-semibold truncate">{s.title}</div>
                        <div className="text-xs text-neutral-600 truncate">{s.price} • {s.city}</div>
                      </div>
                      <a href={`#l-${s.id}`} className="shrink-0 px-3 py-1.5 rounded-lg text-xs font-semibold text-white" style={{backgroundColor: BRAND.accent}}>
                        Смотреть
                      </a>
                    </div>
                  </div>
                </div>
              ))}

              <button onClick={()=>go(-1)} aria-label="Предыдущий" className="absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 hover:bg-white border border-neutral-200 w-9 h-9 grid place-items-center">‹</button>
              <button onClick={()=>go(1)} aria-label="Следующий" className="absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 hover:bg-white border border-neutral-200 w-9 h-9 grid place-items-center">›</button>

              <div className="absolute bottom-2 left-0 right-0 flex justify-center gap-2">
                {slides.map((_,k)=>(
                  <button key={k} onClick={()=>setI(k)} aria-label={`Слайд ${k+1}`} className={`h-2 rounded-full transition-all ${k===i?'w-6 bg-neutral-900':'w-2 bg-neutral-300'}`} />
                ))}
              </div>
            </div>
          </div>
        );
      }

      /* ===== Поисковик ===== */
      // остальной код без изменений...

      function SearchInside() {
        const [q, setQ] = React.useState("");
        const [results, setResults] = React.useState(MOCK);

        const runSearch = (query) => {
          const s = (query || q).toLowerCase();
          if (!s) { setResults(MOCK); return; }
          setResults(MOCK.filter(item =>
            item.title.toLowerCase().includes(s) ||
            item.area.toLowerCase().includes(s) ||
            item.city.toLowerCase().includes(s) ||
            item.price.toLowerCase().includes(s)
          ));
        };

        const onSubmit = (e) => { e.preventDefault(); runSearch(q); };

        const quick = ["айфон до 20к центр","ремонт стиралки сегодня","велосипед до 15к кузнецкий","ноутбук до 30к"];

        return (
          <section id="inside" className="py-16 bg-neutral-50">
            {/* остальное без изменений */}
          </section>
        );
      }

      // остальной код полностью без изменений...

      ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
  </body>
</html>
